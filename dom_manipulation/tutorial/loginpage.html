<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <form action="/submit" onsubmit="event.preventDefault(); submitForm();">
        <div class="col-md-6 p-5 ">
        
        <div class="shadow-sm p-5 mb-5 bg-danger rounded text-white">
        <div class="row  p-4 bg-primary">
            <div class="mb-3 ">
                <label for="email" class="form-label">Email address</label>
                <input type="email" class="form-control" id="email" aria-describedby="emailHelp">
                <span id="email-val-msg" class="text-danger validation-msg"></span>
              </div>
              <div class="mb-3">
                <label for="InputPassword1" class="form-label">Password</label>
                <input type="password" class="form-control" id="password">
                <span id="password-val-msg" class="text-danger validation-msg"></span>
              </div>
              <div class="mb-3">
                <label for="ConfirmPassword1" class="form-label">Confirm password</label>
                <input type="password" class="form-control" id="c-password">
                <span id="cpassword-val-msg" class="text-danger validation-msg"></span>
              </div>
              <button type="submit" class="btn btn-danger">Submit</button>
        </div>
    </div>
    </div>
        
      </form>

      <script>
        const submitForm = () =>{
            // target each fields and save the value as a variable
            const email = document.querySelector("#email").value;
            const password = document.querySelector("#password").value;
            const c_password = document.querySelector("#c-password").value;

            // target all input fields and loop through so we remove any red border previously existing from previous validation run
            document.querySelectorAll("input").forEach(function(input, index){
                input.style.border = "1px solid transparent"
            });

            // target all validation message holder and loop through so we remove any message previously existing from previous validation run
            document.querySelectorAll(".validation-msg").forEach(function(ele, index){
                ele.textContent = '';
            })
            // Rule 1: email is required
            if(email.length === 0){
                document.querySelector("#email-val-msg").textContent ="Email is required";
                document.querySelector("#email").style.border = "2px solid #dc3545";
                // alert("Email is required");
                return;
            }
            // Rule 2: password is required
            if(password.length === 0){
                // alert("password is required")
                document.querySelector("#password-val-msg").textContent ="Password is required";
                document.querySelector("#password").style.border = "2px solid #dc3545";
                return;
            }

            // Rule 3: Password must contain special characters
            const specialCharsRegex = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
            if(!specialCharsRegex.test(password)){
                document.querySelector("#password-val-msg").textContent ="Password must have special character";
                document.querySelector("#password").style.border = "2px solid #dc3545";
                return; 
            }
            // Rule 4: confirm password must match password
            if(c_password !== password ){
                // alert("Password mismatch")
                document.querySelector("#cpassword-val-msg").textContent ="Confirm Password does not match password field";
                document.querySelector("#c-password").style.border = "2px solid #dc3545";
                return;
            }

            alert("All Good")

        }
      </script>
</body>
</html>