<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

    <Section>
        <div class="row justify-content-center m-5 p-5">
            <div class="col-md-6 p-5 bg-light">
                <form action="/submit" onsubmit="event.preventDefault(); submitForm();">
                    <div class="mb-3 ">
                        <label for="email" class="form-label">Email address</label>
                        <input type="text" class="form-control" id="email" aria-describedby="emailHelp">
                        <span id="email-val-msg" class="text-danger validation-msg"></span>
                    </div>
                    <div class="mb-3 ">
                        <label for="inputUsername" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" aria-describedby="emailHelp">
                        <span id="username-val-msg" class="text-danger validation-msg"></span>
                    </div>
                    <div class="mb-3">
                        <label for="InputPassword1" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password">
                        <span id="password-val-msg" class="text-danger validation-msg"></span>
                    </div>
                    
                        <button type="submit" class="btn btn-primary btn-large text-align-center">Submit</button>
                </form>
            </div>
        </div>
    </Section>

      <script>

            /*
            Create a user registration form with the following inputs 
            Email
            Username
            Password

            Write a JavaScript code to validate the inputs when the form is submitted using the following rules:

            1. Email: required, must be a valid email format
            2. Username: required, must be up to 4 characters
            3. Required, must be up to 8 characters and must contain special characters
            */       
           
            const submitForm = () =>{
                //input declared as variables
                const email = document.querySelector("#email").value;
                const username = document.querySelector("#username").value;
                const password = document.querySelector("#password").value;

                //Target each input and loop through to remove previous form validation
                document.querySelectorAll("input").forEach(function(input, index){
                    input.style.border = "1px solid transparent"
                });

                //Target all validation-msg and loop through to remove any previous existing validation run
                document.querySelectorAll(".validation-msg").forEach(function(ele, index){
                    ele.textContent = "";

                })
                
                
                //Verification for Email is required
                if (email.length === 0){
                    document.querySelector("#email-val-msg").textContent = "Email is required";
                    document.querySelector("#email").style.border = "2px solid #dc3545";
                    //this alert email is required
                    return
                }

                // //Verification for valid email format
                const validRegex = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
                if(email.match(validRegex)){
                    document.querySelector("#email-val-msg").textContent= "invalid email";
                    document.querySelector("#email").style.border = "2px solid #dc3545";
                    return
                }
                

                //Verification for username required
                if (username.length === 0){
                    document.querySelector("#username-val-msg"). textContent= "Username is required";
                    document.querySelector("#username").style.border = "2px solid #dc3545";
                    return
                    //alert username is required
                }

                //Verification for username length
                if (username.length < 4){
                    document.querySelector("#username-val-msg"). textContent= "Username must be up to 4 characters";
                    document.querySelector("#username").style.border = "2px solid #dc3545";
                    return
                    //alert username must be up to 4 characters
                }

                //Verification for password required
                if (password.length === 0){
                    document.querySelector("#password-val-msg").textContent = "Password required";
                    document.querySelector("#password").style.border = "2px solid #dc3545";
                    return
                    //alert password is required
                }

                 //Verification for password length
                 if (password.length < 8){
                    document.querySelector("#password-val-msg").textContent = "Password must be up to 8 characters";
                    document.querySelector("#password").style.border = "2px solid #dc3545";
                    return
                    //alert password is required
                }

                //Verification password must have special character
                const specialCharsRegex = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
                if (!specialCharsRegex.test(password)){
                    document.querySelector("#password-val-msg").textContent = "Password must contain special character";
                    document.querySelector("#password").style.border = "2px solid #dc3545";
                    return
                    //Alert special character is needed
                }

                alert("Registration successful")
            }

           

        
      </script>
</body>
</html>